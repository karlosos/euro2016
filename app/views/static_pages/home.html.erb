<% if user_signed_in? %>
<%= form_tag update_multiple_predictions_path, :method => :put do %>
<table class="matches table table-striped">
  <thead class="thead-inverse">
    <th class="left">Data</th>
    <th class="left">Team A</th>
    <th class="center" colspan="3">Wynik</th>
    <th class="right">Team B</th>
    <th class="center" colspan="3">Tw√≥j wynik</th>
  </thead>
  <tbody>
    <% @Matches.each do |match| %>
    <tr>
      <td class="date left"><%= match.date %></td>
      <td class="team_a left"><%= match.team_a.name %></td>
      <td class="score_a right"><%= match.score_a %></td>
      <td class="delimeter center">:</td>
      <td class="score_b left"><%= match.score_b %></td>
      <td class="team_b right"><%= match.team_b.name %></td>
      <% prediction = match.predictions.find_by(user: current_user.id) %>
        <% if prediction && prediction.score_a? %>
        <td class="user_prediction_score_a right"><%= match.predictions.find_by(user: current_user.id).score_a %></td>
        <td class="delimeter center">:</td>
        <td class="user_prediction_score_b left"><%= match.predictions.find_by(user: current_user.id).score_b %></td>
      <% elsif prediction && prediction.score_a? == false %>
        <%= render 'prediction_form', :prediction => prediction, :match_id => match.id %>
      <% else %>
        <% prediction = Prediction.create(match: match, user: current_user) %>
        <%= render 'prediction_form', :prediction => prediction, :match_id => match.id %>
      <% end %>
    </tr>
    <% end %>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="9">
        <div class="actions">
          <%= submit_tag "Submit", :class => "btn btn-primary"%>
        </div>
      </td>
    </tr>
  </tfoot>
</table>
<% end %>
<% else %>
  <%= render 'jumbotron' %>
<% end %>
